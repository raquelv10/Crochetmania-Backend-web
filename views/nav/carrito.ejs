<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Crochetmania-Carrito</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
    integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
    <script src="https://kit.fontawesome.com/41bcea2ae3.js" crossorigin="anonymous"></script>
    <!-- favicon -->
    <link rel="icon" type="image/png" href="../img/favicon.png">
    <!--  fin favicon -->
    <link rel="stylesheet" href="../css/Pre-loader.css">
    <link rel="stylesheet" href="../css/reponsive.css">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/carrito.css">
    <script src="../js/pre-loader.js"></script>
    <script src="../js/scroll.js"></script>
    <script src="../js/aside.js"></script>
    <script src="../js/buscador.js"></script>
    <script src="../js/colapsar.js"></script>
    <script type="module" src="../js/carrito.js"></script>

</head>

<body>

    <!-- div de carga del PRE-LOADER -->
    <div class="pre-loader"></div>

    <!-- DIV CONTENEDOR DE TODO -->
    <div class="container">
        <!-- ASIDE -->
        <%- include('../partials/aside.ejs') %>

        <!-- NAVBAR SUPERIOR -->

        <%- include('../partials/nav_sup.ejs') %>

        <!-- Código de cookies -->
        <%- include('../partials/cookies.ejs') %>

        <!-- HEADER --->
        <header>
            <div id="logo_header"></div>
        </header>

        <!-- BUSCADOR DE GOOGLE  https://programmablesearchengine.google.com/controlpanel/all-->
        <%- include('../partials/buscador.ejs') %>

        <!-- NAVBAR PRINCIPAL -->
        <%- include('../partials/nav_inf.ejs') %>

        <!-- CONTENIDO PRINCIPAL -->
        <main class="col-m-12">
            <section class="col-m-8 section-carrito">
                <h2>Carrito</h2>

                <div class="cabeceras">
                    <div class="tit-producto">Producto</div>
                    <div class="tit-precio">Precio</div>
                    <div class="tit-cantidad">Cantidad</div>
                    <div class="tit-total">Total</div>
                </div>
                <div class="separador-carrito" id="separador1"></div>
                <% productos.forEach(productos=> { %>
                <div class="contenedor-carrito" id="<%= productos.idProducto %>">

                    <div class="imagen-producto"><img src="<%= productos.imagen_producto %>" alt="imagen-producto"> </div>
                    <div class="nombre-producto"><%= productos.nombre %></div>
                    <div class="descripcion-producto"><%= productos.descripcion %></div>
                    <div class="cantidad"><input class="input-cantidad" type="number" name="cantidad" id="cantidad-carrito" value="<%= productos.cantidad %>" min="0"><i class="fa fa-trash" id="<%= productos.idProducto %>"></i></div>
                    <div class="precio-producto">
                        <div class="precio"><%= productos.precio.toFixed(2) %></div>
                        <div>€</div>    
                    </div>
                    
                    <% let total=productos.precio * productos.cantidad; %>
                    <div class="total-producto">
                        <div class="total"><%= total.toFixed(2) %> </div>
                        <div>€</div> 
                    </div>

                </div>
                <div class="separador-carrito"></div>
                <% }); %>

                <!-- aquí hay que hacer la suma total -->
                <div class="contenedor-carrito-total ">
                    <div class="subtotal-text">Subtotal</div>
                    <div class="subtotal"> </div>
                    <div class="portes-text">Portes</div>
                    <div class="portes"> 2,99 €</div>
                    <div class="suma-text">Total</div>
                    <div class="suma">14,99 €</div>
                </div>
                <div class="contenedor-botones">
                    <button type="submit" class="btn boton-vaciar">Vaciar carrito</button>
                    <button type="submit" class="btn boton-finalizar">Finalizar compra
                        </button>
    
                </div>

            </section>

        </main>

    <!-- FOOTER  + SCROLL-->
    <%- include('../partials/footer.ejs') %>

</body>

</html>